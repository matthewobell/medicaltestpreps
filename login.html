<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Open in Medical Test Prep</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page-specific styles for the magic-link screen -->
  <style>
    :root {
      --bg-color: #f4e4c3;
      --button-color: #f5d489;
      --button-text: #000000;
      --text-color: #000000;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
        system-ui, -webkit-system-font, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    .page-wrapper {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .card {
      width: 100%;
      max-width: 480px;
      text-align: center;
    }

    h1 {
      margin: 0 0 16px;
      font-size: 32px;
      line-height: 1.2;
      font-weight: 800;
    }

    .subtitle {
      font-size: 17px;
      line-height: 1.4;
      margin-bottom: 40px;
    }

    .primary-button {
      display: inline-block;
      padding: 18px 32px;
      border-radius: 999px;
      border: none;
      background-color: var(--button-color);
      color: var(--button-text);
      font-size: 18px;
      font-weight: 700;
      text-decoration: none;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .primary-button:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
    }

    /* Optional tiny debug link, hidden visually but still there if needed */
    .debug-link {
      margin-top: 16px;
      font-size: 11px;
      color: #555;
      word-break: break-all;
      display: none; /* set to "block" if you ever want to see it */
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <div class="card">
      <h1>Open in<br />Medical Test Prep</h1>
      <p class="subtitle">
        Weâ€™re opening your Medical Test Prep app to finish signing you in.
        If nothing happens, tap the button below.
      </p>

      <button id="open-app-button" class="primary-button">
        Open in Medical Test Prep
      </button>

      <a id="debug-link" href="#" class="debug-link"></a>
    </div>
  </div>

  <script>
    (function () {
      // Take everything after the "?" in the current URL
      var queryString = window.location.search || "";

      // Build the deep link that your app understands.
      // Example: emigsprep://magic?mode=signIn&oobCode=...&apiKey=...
      var deepLink = "emigsprep://magic" + queryString;

      // Hook up the button to open the deep link
      var button = document.getElementById("open-app-button");
      button.addEventListener("click", function () {
        window.location.href = deepLink;
      });

      // Optional: tiny hidden debug link if you ever need it
      var debug = document.getElementById("debug-link");
      debug.href = deepLink;
      debug.textContent = "Deep link: " + deepLink;
    })();
  </script>
</body>
</html>
